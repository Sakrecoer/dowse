<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- captive_portal.html -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Dowse web ui">
        <meta name="author" content="fredd">
        <title>Your Dowse Box</title>
        <!-- Bootstrap core CSS -->
        <link href="static/bootstrap/css/bootstrap.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="static/navbar.css" rel="stylesheet">
        <link href="static/css/dowse.css" rel="stylesheet" type="text/css">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    </head>
    <body>
        <div class="container">
          <!-- Static navbar -->
          <nav class="navbar navbar-default">
              <div class="container-fluid">
                  <div class="navbar-header">
                      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                          <span class="sr-only">Toggle navigation</span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                      </button>
                      <a href="/">
                          <img src="static/img/dowseLogo.png" width="40%" class="img-responsive visible-sm visible-md visible-lg visible-xs-inline-block" />
                      </a>
                  </div>
                  <div id="navbar" class="navbar-collapse collapse">
                      <ul class="nav navbar-nav">
                          <li>
                              <a href="/things">Things</a>
                          </li>
                          <li>
                              <a href="http://dowse.it:29999/#menu_Dowse">Netdata</a>
                          </li>
                          <li>
                              <a href="http://dowse.it:1880">Node-Red</a>
                          </li>
                          <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Documentation <span class="caret"></span></a>
                              <ul class="dropdown-menu">
                                  <li>
                                      <a href="/help">Help</a>
                                  </li>
                                  <li>
                                      <a href="http://dowse.eu">Dowse-eu Website</a>
                                  </li>
                                  <li>
                                      <a href="https://github.com/dyne/dowse/wiki">Wiki</a>
                                  </li>
                                  <li role="separator" class="divider"></li>
                                  <li>
                                      <a href="https://www.github.com/dyne/dowse">GitHub</a>
                                  </li>
                                  <li>
                                      <a href="https://mailinglists.dyne.org/cgi-bin/mailman/listinfo/dowsers">mailing list</a>
                                      <li>
                                          <a href="https://irc.dyne.org">irc-channel: #dowsers</a>
                                      </li>
                                      <li role="separator" class="divider"></li>
                                      <li class="dropdown-header">Hacking</li>
                                      <li>
                                          <a href="/websocket">Websockets</a>
                                      </li>
                                      <li>
                                          <a href="/nmap">Nmap</a>
                                      </li>
                                      <li>
                                          <a href="/mqtt">MQTT</a>
                                      </li>
                              </ul>
                          </li>
                      </ul>
                  </div>
                  <!--/.nav-collapse -->
        </div>
        <!--/.container-fluid -->
    </nav>
    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
        {% if admin_button %}
        <h3>Your administrator device is not configured.</h3>
        <form action="/test_admin" method="post">
            {% if not cur_info['name'] %}
                <input type="text" class="form-control" id="name" name="name" placeholder="your device name" required autofocus>
            {% else %}
                <input type="hidden" id="name" name="name" value="{{ cur_info['name'] }}">
            {% endif %}
            <div class="col-xs-6 col-md-3">
</div>
            <input type="hidden" id="curmac" name="curmac" value="{{ cur_info['macaddr'] }}">
            <button type="submit" value="update" name="action" class="btn btn-primary"> Use this device as the administrator </button>
        </form>
        {% else %}
        <div class"col-xs-4" "col-md-3">
            {% if cur_info['name'] %}
            <h3>Hi {{ cur_info['name'] }}. Please wait until you are authorized.</h3>
            {% else %}
            <h3>Hallo, who are you?</h3>
            <form action="/modify_things" method="post">
                <input type="text" class="form-control" id="name" name="name" placeholder="your device name" required autofocus>
                <div class="col-xs-6 col-md-3">
</div>
                <input type="hidden" name="url_from" value="/">
                <input type="hidden" id="macaddr" name="macaddr" value="{{ cur_info['macaddr'] }}">
                <button type="submit" value="update" name="action" class="btn"> Ask me if you can use this LAN </button>
            </form>
            {% endif %}
        {% endif %}
            <div>
                <h2>Your Device Info:</h2>
                <p>
                  {% if cur_info['name'] %}
                      <strong>Name:</strong> {{ cur_info['name'] }}<br>
                  {% endif %}
                  <strong>MAC:</strong> {{ cur_info['macaddr'] }}<br>
                  <strong>IP:</strong> {{ cur_info['ip4'] }}<br>
                </p>
                {% if not admin_button %}
                    <h1>Welcome to my home pal!</h1>
                    <p>If you ask me politely I <i>might</i> give you access to the web, or
                       use of the toilet (or both) and even prepare a cup of tea, according
                       to how nice your devices behave.
                    </p>
                    <p>This network is aware to what you and your devices do through
                       DOWSE.&nbsp;
                    </p>
                    <p>For more info go to <a href="http://www.dowse.eu">www.dowse.eu</a></p>
                {% endif %}
            </div>
        </div>
    </div>
    <!-- /container -->
</div>
<!-- Bootstrap core JavaScript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="static/assets/js/jquery.min.js"></script>
<script src="static/bootstrap/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="static/assets/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
